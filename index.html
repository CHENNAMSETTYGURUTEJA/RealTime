<!DOCTYPE html>
<html>
<head>
    <title>Real-Time Chat App</title>
    <style>
        body { font-family: Arial; max-width: 500px; margin: auto; padding-top: 20px; }
        #messages { border: 1px solid #ccc; padding: 10px; height: 300px; overflow-y: scroll; margin-bottom: 10px; }
        input { width: 70%; padding: 8px; }
        button { width: 25%; padding: 8px; }
        .msg { padding: 5px; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>
    <h2>Real-Time Chat App</h2>
    <div id="messages"></div>
    <input type="text" id="messageInput" placeholder="Type message...">
    <button onclick="sendMessage()">Send</button>

    <!-- Firebase Scripts (compat build so the older firebase.* API works) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

    <script>
        // 1️⃣ Firebase Config — replace placeholders if needed
        const firebaseConfig = {
            apiKey: "AIzaSyBHcUSg8i4A2zd7l_0IqOmDd9mCE7OsaAY",
            authDomain: "real-time-chat-app-651db.firebaseapp.com",
            databaseURL: "https://real-time-chat-app-651db-default-rtdb.firebaseio.com/", // confirm in Console
            projectId: "real-time-chat-app-651db",
            storageBucket: "real-time-chat-app-651db.firebasestorage.app",
            messagingSenderId: "1007964738166",
            appId: "1:1007964738166:web:REPLACE_WITH_WEB_APP_ID" // replace with your Web App's appId from Firebase Console
        };

        // Initialize Firebase (compat)
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        const messagesDiv = document.getElementById("messages");

        // 2️⃣ Send message
        function sendMessage() {
            const msg = document.getElementById("messageInput").value;
            if (msg.trim() === "") return;

            const newMsg = db.ref("chat").push();
            newMsg.set({
                text: msg,
                timestamp: Date.now()
            });

            document.getElementById("messageInput").value = "";
        }

        // 3️⃣ Listen for new messages in real-time
        db.ref("chat").on("child_added", (snapshot) => {
            const message = snapshot.val();
            const div = document.createElement("div");
            div.classList.add("msg");
            div.textContent = message.text;
            messagesDiv.appendChild(div);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });
    </script>
</body>
</html>
